<!-- Page wrapper -->
<div class="flex flex-col min-h-screen overflow-hidden">
  <%= render 'shared/header' %>

  <main class="grow">
    <section class="relative">
      <div class="max-w-6xl mx-auto px-4 pt-20">
        <h3 class="h3"><%= $pageTitleMap[params[:category].to_sym] %> Reviewers</h3>
      </div>
    </section>
    <section class="relative">
      <div class="flex flex-row items-center max-w-6xl mx-auto px-4 pt-10">
        <h5 class="h5 mr-10">Choose platform:</h5>
        <div x-data="{ chosenPlatform: 'websites' }" class="grid grid-cols-2 divide-x gap-4">
          <h4 @click="chosenPlatform = 'websites'" :class="{'text-sky-700': chosenPlatform === 'websites', 'font-semibold': chosenPlatform === 'websites', 'font-light': chosenPlatform !== 'websites'}" class="h4 text-center cursor-pointer">Websites</h4>
          <h4 @click="chosenPlatform = 'streamers'" :class="{'text-sky-700': chosenPlatform === 'streamers', 'font-semibold': chosenPlatform === 'streamers', 'font-light': chosenPlatform !== 'streamers'}" class="h4 pl-8 text-center cursor-pointer">Streamers</h4>
        </div>
      </div>
    </section>
    <section class="relative">
      <div class="flex flex-row items-center max-w-6xl mx-auto px-4 pt-10 mb-4">
        <div class="grow grid grid-cols-8">
          <!-- <div x-data class="flex flex-row items-end col-start-1 col-span-7 gap-4">
            <form action="/reviewers/<%= params[:category] %>?filter=<%= params[:category] %>" method="get">
              <button type="button" @click="window.history.pushState({filter: 'rated'}, 'Reviewers', '/reviewers/<%= params[:category] %>?filter=rated')" class="btn py-2 col-span-1 text-sm text-slate-600 bg-white border-2 drop-shadow-sm hover:bg-slate-50 <%= 'border-sky-600' if @sort_by == 'rated' %>">
                Best Rated
              </button>
              <button type="submit" class="btn py-2 col-span-1 text-sm text-slate-600 bg-white border-2 drop-shadow-sm hover:bg-slate-50 <%= 'border-sky-600' if @sort_by == 'unrated' %>">
                Unrated
              </button>
              <button class="btn py-2 col-span-1 text-sm text-slate-600 bg-white border-2 drop-shadow-sm hover:bg-slate-50 <%= 'border-sky-600' if @sort_by == 'active' %>">
                Most Active
              </button>
              <button class="btn py-2 col-span-1 text-sm text-slate-600 bg-white border-2 drop-shadow-sm hover:bg-slate-50 <%= 'border-sky-600' if @sort_by == 'popular' %>">
                Most Popular
              </button>
          </div> -->
          <div class="col-start-8 col-span-1">
            <p>Sort by: Rating</p>
            <button class="btn border-sky-600 py-1 px-2 col-span-1 text-xs text-slate-600 bg-white border-2 drop-shadow-sm hover:bg-slate-50">
              Lowest to Highest
            </button>
            <button class="btn mt-1 py-1 px-2 col-span-1 text-xs text-slate-600 bg-white border-2 drop-shadow-sm hover:bg-slate-50">
              Highest to Lowest
            </button>
          </div>
        </div>
      </div>
    </section>
    <section div="my_div" class="relative">
      <%= render 'list', reviewers: @reviewers %>
    </section>
  </main>
  <!-- Site footer -->
  <%= render 'shared/footer' %>

  <script>
    async function getReviewers(category, filter) {
      return await fetch(`127.0.0.1/reviewers/${category}?filter=${filter}`);
    }
  </script>
</div>